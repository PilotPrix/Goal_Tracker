<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1"/>
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="HandheldFriendly" content="true">
	<title>JamHacks</title>
	<link rel="icon" href="logo.png">
	<link rel="stylesheet" type="text/css" href="styles.css">
	<link href="action_page.php">
	<link rel="preconnect" href="https://fonts.gstatic.com">
	<link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300&display=swap" rel="stylesheet">
	<link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
	<script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
</head>
<body>
	<script>
		AOS.init();
		AOS.init({
		duration: 1000,
		offset: 120,
		throttleDelay: 200,
		});
	</script>
	<div class="container">
		<h1 class="center">Goal Tracker and Milestone Setter</h1>
		<button type="button" class="header_button">Set My Goal</button>
		<button type="button" class="header_button">Learn More</button>
	</div>	
	<div>
		<h4>What is your goal?</h4>
		<input type="text" name="goal" class="start" placeholder="Type in your Goal"/>
		<h4>Split your goal into different stages?</h4>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<input type="text"  class="start" name="goal" placeholder="Type in your goal stage">
	<input type="date" class="start2" id="date_in" name="start"/>

    <button onclick="addLine()" class="add_button">Add</button>
    <div id="new_space"></div>
    <div id="new_date_space"></div>

    <input type="hidden" class="start" value="1" id="new_line" placeholder="Type in your goal stage">
    <!--New Thing -->
   <!--  <input type="hidden" class="start2" id="new_date_in" name="start"/> -->
	<script>
	  function addLine(){
      var new_chq_no = parseInt($('#new_line').val())+1;
      var new_input="<input type='text'class='start' placeholder='Type in your goal stage'id='new_"+new_chq_no+"'><input type='date' id='date_in' class='start2'/> <br>";
      // var new_input="<input type='text'class='start' placeholder='Type in your goal stage'id='new_"+new_chq_no+"'>";
      // var new_date_input = "<input type='date' class='start2' id='new_"+new_chq_ne+"'/> <br>";

      $('#new_space').append(new_input);
      // $('#new_date_space').append(new_date_input);
      $('#new_line').val(new_chq_no);
      // $('#new_date_in').val(new_chq_ne);
    }
	</script>
	<script>
		   document.getElementById("date_in").addEventListener("change", function() {
		 	var input = this.value;
			console.log(input);
		})

	</script>
	
	<br><br>
		<input type="checkbox" class="checkb">I would like to receive notifications on my milestones</checkbox><br>

			<button id="calculate" class="add_button" onclick="show()">Amount of Days Left</button>
			<button id="calculate" class="add_button" >Progress</button>
			<button id="calculate" class="add_button" >Milestone Timeline</button>

		<div class="results">
			<p id="remainingTime"></p>
		</div>
		<script>
			function show(){
				var x = document.getElementById("remainingTime");
				if (x.style.display === "none"){
					x.style.display = "block";
				} else {
					x.style.display = "none";
				}
			}


			function refreshTimer(){
			  function countDown(){
			    setTimeout(function(now){
                 var dif = (td-now)/1000,
                      ss = Math.floor(dif % 60).toString().padStart(2,"0"),
                      ms = Math.floor(dif/60 % 60).toString().padStart(2,"0"),
                      hs = Math.floor(dif/3600 % 24).toString().padStart(2,"0"),
                      ds = Math.floor(dif/86400).toString().padStart(3,"0");
                  remainingTime.textContent = dif > 0 ? `${ds} Days ${hs}:${ms}:${ss}`
                                                      : "Sorry. You are already late..!";
                  active && countDown();
                  this.removeEventListener("change", kill); // possibly redundant
                }, 1000, Date.now());
  }
			  var td     = new Date(this.value),
			      active = true,
			      kill   = _ => active = false;
			  this.addEventListener("change", kill);
			  countDown();
			}

			var targetDateTime = document.getElementById("date_in"),
			    remainingTime  = document.getElementById("remainingTime");

			targetDateTime.addEventListener("change",refreshTimer);

		</script>

</body>
